# EOL Rebaser Migration Configuration
#
# This file defines image migrations for bootc systems when images reach
# end of life (EOL). Each migration specifies a pattern to match deprecated
# images and the target image to migrate to.
#
# Configuration format:
# migrations:
#   - name: "Human readable migration name"
#     from_pattern: "regex pattern to match source images"
#     to_image: "target image to migrate to (supports regex substitution)"
#     reason: "explanation for why this migration is needed"
#     effective_date: "YYYY-MM-DD when migration becomes active"

migrations:
  # Aurora ASUS to HWE Migration - preserves all variants and tags
  - name: "Aurora ASUS to HWE Migration"
    from_pattern: "ghcr\\.io/ublue-os/(aurora(?:-dx)?)-asus(-nvidia(?:-open)?)?:(.+)"
    to_image: "ghcr.io/ublue-os/\\1-hwe\\2:\\3"
    reason: "ASUS-specific hardware enablement images are deprecated. Migrating to standard HWE images which include all necessary drivers."
    effective_date: "2024-10-15"
    
  # Aurora Surface to HWE Migration - preserves all variants and tags
  - name: "Aurora Surface to HWE Migration"
    from_pattern: "ghcr\\.io/ublue-os/(aurora(?:-dx)?)-surface(-nvidia(?:-open)?)?:(.+)"
    to_image: "ghcr.io/ublue-os/\\1-hwe\\2:\\3"
    reason: "Surface-specific hardware enablement images are deprecated. Migrating to standard HWE images which include all necessary drivers."
    effective_date: "2024-10-15"
    
  # Bazzite DX NVIDIA Open to NVIDIA Migration (example from the issue)
  - name: "Bazzite DX NVIDIA Open to NVIDIA"
    from_pattern: "ghcr.io/ublue-os/bazzite.*-nvidia-open:.*"
    to_image: "ghcr.io/ublue-os/bazzite-nvidia"
    reason: "The nvidia-open variant is identical to the nvidia variant and has been consolidated."
    effective_date: "2024-08-01"
    
  # Example Bluefin migration (placeholder)
  - name: "Bluefin Legacy to Modern"
    from_pattern: "ghcr.io/ublue-os/bluefin-legacy:.*"
    to_image: "ghcr.io/ublue-os/bluefin"
    reason: "Legacy Bluefin images are no longer maintained. Please migrate to the standard Bluefin image."
    effective_date: "2025-01-01"
